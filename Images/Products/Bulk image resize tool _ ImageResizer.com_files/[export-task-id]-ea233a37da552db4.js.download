(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6641],{17845:function(e,r,a){"use strict";a.d(r,{j:function(){return n}});var i=a(67294),t=a(85893),n=function(){var e=(0,i.useState)("..."),r=e[0],a=e[1];return(0,i.useEffect)((function(){var e=setInterval((function(){a((function(e){return""===e?".":"."===e?"..":".."===e?"...":""}))}),500);return function(){return e&&clearInterval(e)}}),[]),(0,t.jsx)("span",{className:"whitespace-nowrap",children:r})}},23559:function(e,r,a){"use strict";a.d(r,{p:function(){return p}});var i=a(59499),t=a(42211).g.actions,n=t.addToast,s=t.removeToast,d=t.removeBatch,o=a(90177),l=a(27840);function c(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),a.push.apply(a,i)}return a}function u(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?c(Object(a),!0).forEach((function(r){(0,i.Z)(e,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))}))}return e}var p=function(){var e=(0,o.TL)();return{toast:function(r){var a=(0,l.w)();return e(n({toast:u({id:a},r)})),r.time&&setTimeout((function(){e(s({id:a}))}),r.time),a},removeToast:function(r){return e(s({id:r}))},removeBatch:function(r){return e(d({batch:r}))}}}},58837:function(e,r,a){"use strict";a.d(r,{Q:function(){return n},o:function(){return s}});var i=a(67294),t=a(85893),n=(0,i.createContext)({task:null}),s=function(e){var r=e.children,a=e.task;return(0,t.jsx)(n.Provider,{value:{task:a},children:r})}},27840:function(e,r,a){"use strict";a.d(r,{w:function(){return t}});var i=a(25934),t=function(){return(0,i.Z)()}},54377:function(e,r,a){"use strict";a.r(r),a.d(r,{__N_SSP:function(){return U},default:function(){return X}});var i=a(27812),t=a(4713),n=a(82566),s=a(79733),d=a(38813),o=a(85893),l=function(e){var r=e.isProcessing,a=e.isExporting,i=e.handleDownload,l=e.isPlural,c=void 0!==l&&l,u=!r&&!a;return(0,o.jsx)("div",{className:"flex justify-center py-4 bg-white border dark:bg-darkSurface-200 border-irGray-400 dark:border-darkSurface-400",children:(0,o.jsxs)("div",{className:"".concat(u?"cursor-pointer":"cursor-progress"," inline-flex gap-4 items-center justify-center text-white sm:text-xl lg:text-[2rem] font-semibold ").concat(u?"bg-irBlue-200 dark:bg-darkPrimary-100 dark:hover:bg-darkPrimary-200 hover:bg-irBlue-400":"bg-irGray-600"," py-4 rounded-lg px-8 lg:px-16 mx-4"),onClick:i,"data-testid":"download-button",children:[(0,o.jsx)("div",{className:"",children:u?(0,o.jsx)(s._,{width:25,height:25}):(0,o.jsx)(d.a,{className:"stroke-white",width:25,height:25})}),(0,o.jsx)("div",{className:"capitalize whitespace-nowrap","data-testid":"download-button-text",children:r?(0,t.k)((0,n.V)("common:processing")):a?(0,t.k)((0,n.V)("exporting")):(0,t.k)(c?(0,n.V)("common:download-all-images")||"Download All Images":(0,n.V)("common:download-image"))})]})})},c=a(10131),u=a(56726),p=a(15062),f=a(17845),x=a(14124),h=a(50029),b=a(87794),m=a.n(b),v=a(31458),j=a(18864),k=a(8986),g=a(34038),w=a(67294),y=function(e){var r=(0,w.useState)(null),a=r[0],i=r[1],t=(0,w.useState)(""),n=t[0],s=t[1];function d(){return d=(0,h.Z)(m().mark((function e(){var r,a,t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:if(r=e.sent,a=r.result,t=r.error,a&&!t){e.next=8;break}return s("Fetch error."),e.abrupt("return");case 8:if(i(a),s(""),"completed"===a.status){e.next=13;break}return e.next=13,new j.M(a,{handleTaskComplete:function(e){return i(e)},handleTaskFail:function(){s("Conversion Failed.")}}).appendTask();case 13:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function o(){return l.apply(this,arguments)}function l(){return l=(0,h.Z)(m().mark((function r(){var a,i,t;return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,v.U)("/api/tasks/".concat(e));case 2:if(a=r.sent,i=a.result,!(t=a.error)&&i){r.next=9;break}return r.next=8,(0,v.U)("/api/tasks/".concat(e));case 8:return r.abrupt("return",r.sent);case 9:return r.abrupt("return",{result:i,error:t});case 10:case"end":return r.stop()}}),r)}))),l.apply(this,arguments)}return(0,w.useEffect)((function(){!function(){d.apply(this,arguments)}()}),[]),{task:a,error:n,handleSingleDownload:function(){var e,r,i=null===a||void 0===a||null===(e=a.result)||void 0===e||null===(r=e.url)||void 0===r?void 0:r.toString(),t=a?(0,g.J)(a):"";a&&"completed"===a.status&&i&&t&&(0,k.f)(i,t)}}},N=function(e){var r,a,i=e.id,l=e.index,h=y(i),b=h.task,m=h.error,v=h.handleSingleDownload;if(m)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"hidden grid-cols-5 text-red-500 border-b md:grid border-b-irGray-400 dark:border-b-darkSurface-600 last:border-none",children:[(0,o.jsxs)("div",{className:"flex items-center col-span-2 gap-4 px-3 py-2 border-r border-r-irGray-400 dark:border-r-darkSurface-600 flex-start",children:[l+1,". ",m]}),(0,o.jsx)("div",{className:"grid py-2 border-r place-items-center border-r-irGray-400 dark:border-r-darkSurface-600"}),(0,o.jsx)("div",{className:"grid py-2 border-r place-items-center border-r-irGray-400 dark:border-r-darkSurface-600"}),(0,o.jsx)("div",{className:"grid py-2 place-items-center"})]}),(0,o.jsxs)("div",{className:"grid border rounded-lg border-irGray-400 dark:border-darkSurface-600 md:hidden border-b-irGray-400 dark:border-b-darkSurface-600",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between gap-16 px-3 py-2 overflow-hidden border-b whitespace-nowrap border-b-irGray-400 dark:border-b-darkSurface-600",children:[(0,o.jsx)("div",{className:"font-semibold capitalize",children:(0,o.jsx)(c.vN,{keyName:"file-name"})}),(0,o.jsx)("div",{className:"flex items-center overflow-hidden text-red-500",children:m})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between gap-4 px-3 py-2 overflow-hidden border-b whitespace-nowrap border-b-irGray-400 dark:border-b-darkSurface-600",children:[(0,o.jsx)("div",{className:"font-semibold capitalize",children:(0,o.jsx)(c.vN,{keyName:"new-size"})}),(0,o.jsx)("div",{})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between gap-4 px-3 py-2 overflow-hidden border-b whitespace-nowrap border-b-irGray-400 dark:border-b-darkSurface-600",children:[(0,o.jsxs)("div",{className:"font-semibold capitalize",children:["".concat((0,t.k)((0,n.V)("original")))," (px)"]}),(0,o.jsx)("div",{})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 overflow-hidden whitespace-nowrap",children:[(0,o.jsx)("div",{className:"font-semibold capitalize",children:"".concat((0,t.k)((0,n.V)("new"))," (px)")}),(0,o.jsx)("div",{})]}),(0,o.jsx)("div",{className:"flex items-center justify-end gap-1 px-3 py-2 cursor-pointer"})]})]});if(!b||null===(r=b.payload)||void 0===r||!r.extra)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"hidden grid-cols-5 border-b md:grid border-b-irGray-400 dark:border-b-darkSurface-600 last:border-none",children:[(0,o.jsxs)("div",{className:"flex items-center col-span-2 gap-4 px-3 py-2 border-r border-r-irGray-400 dark:border-r-darkSurface-600 flex-start",children:[l+1,". ",(0,o.jsx)(d.a,{width:10,height:10})]}),(0,o.jsx)("div",{className:"grid py-2 border-r place-items-center border-r-irGray-400 dark:border-r-darkSurface-600",children:(0,o.jsx)(d.a,{width:10,height:10})}),(0,o.jsx)("div",{className:"grid py-2 border-r place-items-center border-r-irGray-400 dark:border-r-darkSurface-600",children:(0,o.jsx)(d.a,{width:10,height:10})}),(0,o.jsx)("div",{className:"grid py-2 place-items-center",children:(0,o.jsx)(d.a,{width:10,height:10})})]}),(0,o.jsxs)("div",{className:"grid border rounded-lg border-irGray-400 dark:border-darkSurface-600 md:hidden border-b-irGray-400 dark:border-b-darkSurface-600",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between gap-16 px-3 py-2 overflow-hidden border-b whitespace-nowrap border-b-irGray-400 dark:border-b-darkSurface-600",children:[(0,o.jsx)("div",{className:"font-semibold capitalize",children:(0,o.jsx)(c.vN,{keyName:"file-name"})}),(0,o.jsx)(d.a,{width:10,height:10})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between gap-4 px-3 py-2 overflow-hidden border-b whitespace-nowrap border-b-irGray-400 dark:border-b-darkSurface-600",children:[(0,o.jsx)("div",{className:"font-semibold capitalize",children:(0,o.jsx)(c.vN,{keyName:"new-size"})}),(0,o.jsx)("div",{children:(0,o.jsx)(d.a,{width:10,height:10})})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between gap-4 px-3 py-2 overflow-hidden border-b whitespace-nowrap border-b-irGray-400 dark:border-b-darkSurface-600",children:[(0,o.jsxs)("div",{className:"font-semibold capitalize",children:["".concat((0,t.k)((0,n.V)("original")))," (px)"]}),(0,o.jsx)("div",{children:(0,o.jsx)(d.a,{width:10,height:10})})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 overflow-hidden whitespace-nowrap",children:[(0,o.jsx)("div",{className:"font-semibold capitalize",children:"".concat((0,t.k)((0,n.V)("new"))," (px)")}),(0,o.jsx)("div",{children:(0,o.jsx)(d.a,{width:10,height:10})})]}),(0,o.jsx)("div",{className:"flex items-center justify-end gap-1 px-3 py-2 cursor-pointer",children:(0,o.jsx)(d.a,{width:10,height:10})})]})]});var j=b.payload.extra,k=null!==(a=b.result)&&void 0!==a&&a.size?(0,u.t)(b.result.size):void 0,g=j.file_name.split(".").filter((function(e,r){return r<j.file_name.split(".").length-1})).join(""),w=".".concat(j.file_name.split(".").at(-1));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"grid border rounded-lg border-irGray-400 dark:border-darkSurface-600 md:hidden border-b-irGray-400 dark:border-b-darkSurface-600",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between gap-16 px-3 py-2 overflow-hidden border-b whitespace-nowrap border-b-irGray-400 dark:border-b-darkSurface-600",children:[(0,o.jsx)("div",{className:"font-semibold capitalize",children:(0,o.jsx)(c.vN,{keyName:"file-name"})}),(0,o.jsxs)("div",{className:"flex items-center overflow-hidden",children:[(0,o.jsx)("div",{className:"overflow-hidden whitespace-nowrap text-ellipsis",children:" ".concat(g)}),(0,o.jsx)("div",{className:"flex-shrink-0",children:w})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between gap-4 px-3 py-2 overflow-hidden border-b whitespace-nowrap border-b-irGray-400 dark:border-b-darkSurface-600",children:[(0,o.jsx)("div",{className:"font-semibold capitalize",children:(0,o.jsx)(c.vN,{keyName:"new-size"})}),(0,o.jsx)("div",{children:k})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between gap-4 px-3 py-2 overflow-hidden border-b whitespace-nowrap border-b-irGray-400 dark:border-b-darkSurface-600",children:[(0,o.jsxs)("div",{className:"font-semibold capitalize",children:["".concat((0,t.k)((0,n.V)("original")))," (px)"]}),(0,o.jsxs)("div",{children:[j.original_width," X ",j.original_height]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 overflow-hidden whitespace-nowrap",children:[(0,o.jsx)("div",{className:"font-semibold capitalize",children:"".concat((0,t.k)((0,n.V)("new"))," (px)")}),(0,o.jsxs)("div",{children:[j.new_width," X ",j.new_height]})]}),(0,o.jsx)("div",{className:"flex items-center justify-end gap-1 px-3 py-2 cursor-pointer min-h-[40px]",onClick:v,children:"undefined"!==typeof k&&(0,p.B)(k)>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"text-blue-400",children:k}),(0,o.jsx)(s._,{className:"fill-irBlue-200 dark:fill-irBlue-200",width:15,height:25})]}):(0,o.jsx)(f.j,{})})]}),(0,o.jsxs)("div",{className:"hidden grid-cols-5 border-b md:grid border-b-irGray-400 dark:border-b-darkSurface-600 last:border-none",children:[(0,o.jsxs)(x.e,{text:j.file_name,containerClassNames:"flex items-center col-span-2 border-r border-r-irGray-400 dark:border-r-darkSurface-600 px-3",children:[(0,o.jsxs)("div",{className:"flex-shrink-0",children:[l+1,". "]}),(0,o.jsx)("div",{className:"overflow-hidden whitespace-nowrap text-ellipsis",children:" ".concat(g)}),(0,o.jsx)("div",{className:"flex-shrink-0",children:w})]}),(0,o.jsxs)("div",{className:"py-2 border-r border-r-irGray-400 dark:border-r-darkSurface-600",children:[j.original_width," X ",j.original_height]}),(0,o.jsxs)("div",{className:"py-2 border-r border-r-irGray-400 dark:border-r-darkSurface-600",children:[j.new_width," X ",j.new_height]}),(0,o.jsx)("div",{className:"flex items-center justify-center gap-1 py-2 cursor-pointer",onClick:v,children:"undefined"!==typeof k&&(0,p.B)(k)>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"text-blue-400",children:k}),(0,o.jsx)(s._,{className:"fill-irBlue-200 dark:fill-irBlue-200",width:15,height:25})]}):(0,o.jsx)(f.j,{})})]})]})},S=a(58837),z=function(){var e,r={exportTask:(0,w.useContext)(S.Q).task}.exportTask;if(!r||!r.dependsOn||null===(e=r.dependsOn)||void 0===e||!e.length)return null;var a=r.dependsOn.map((function(e){return"string"===typeof e?e:e.id}));return(0,o.jsxs)("div",{className:"grid gap-4 my-8 overflow-hidden text-center rounded-lg md:border md:gap-0 border-irGray-400 dark:border-darkSurface-600 lg:text-base",children:[(0,o.jsxs)("div",{className:"hidden grid-cols-5 font-semibold text-center border-b md:grid bg-irGray-200 dark:bg-darkSurface-200 border-b-irGray-400 dark:border-b-darkSurface-600",children:[(0,o.jsx)("div",{className:"col-span-2 py-2 capitalize border-r border-r-irGray-400 dark:border-r-darkSurface-600",children:(0,o.jsx)(c.vN,{keyName:"file-name"})}),(0,o.jsxs)("div",{className:"py-2 border-r border-r-irGray-400 dark:border-r-darkSurface-600",children:["".concat((0,t.k)((0,n.V)("original")))," (px)"]}),(0,o.jsx)("div",{className:"py-2 border-r border-r-irGray-400 dark:border-r-darkSurface-600",children:"".concat((0,t.k)((0,n.V)("new"))," (px)")}),(0,o.jsx)("div",{className:"py-2 capitalize",children:(0,o.jsx)(c.vN,{keyName:"new-size"})})]}),a.map((function(e,r){return(0,o.jsx)(N,{id:e,index:r},e)}))]})},G=function(e){var r=e.handleDownload,a=e.isExporting,i=e.isProcessing;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l,{isProcessing:i,isExporting:a,handleDownload:r,isPlural:!0}),(0,o.jsx)(z,{})]})},_=a(30491),P=a(34796),O=a(96517),T=a(93127),V=a(23559),C=function(){var e,r,a=(0,w.useContext)(S.Q).task,i=(0,w.useRef)(0),t=(0,w.useState)((null===a||void 0===a||null===(e=a.result)||void 0===e||null===(r=e.url)||void 0===r?void 0:r.toString())||""),s=t[0],d=t[1],o=(0,w.useState)("created"===(null===a||void 0===a?void 0:a.status)),l=o[0],c=o[1],u=(0,w.useState)("processing"===(null===a||void 0===a?void 0:a.status)),p=u[0],f=u[1],x=(0,V.p)().toast,b=(0,n.V)("resize-failed-toast");function v(){return v=(0,h.Z)(m().mark((function e(r){var a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("completed"!==r.status){e.next=2;break}return e.abrupt("return");case 2:return a=new j.M(r,{handleTaskComplete:function(e){var r,a,i;d((0,T.Z)(null!==(r=null===(a=e.result)||void 0===a||null===(i=a.url)||void 0===i?void 0:i.toString())&&void 0!==r?r:"")),f(!1),c(!1)},handleTaskFail:function(){x({position:"top-right",status:"error",text:b,closeable:!0,time:7e3}),f(!1),c(!1)},handleTaskStart:function(){c(!1),f(!0)}}),e.next=5,a.appendTask();case 5:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}return(0,w.useEffect)((function(){a&&function(e){v.apply(this,arguments)}(a)}),[a]),{isProcessing:l,handleDownload:function(){s&&(i.current++,i.current>1||((0,P.ga)("send",{hitType:"pageview",page:"/vp/bulk_resizer/download_clicked/",title:"Bulk Resizer Download Clicked"}),(0,O.S)("event","Images Downloaded",{event_category:"Bulk Resizer",event_label:"Download Page"})),s&&(0,k.f)(s,"resized-images.zip",!0))},isExporting:p,task:a}},E=a(3200),D=function(){var e=C(),r=e.isProcessing,a=e.handleDownload,i=e.isExporting,t=e.task;return(0,o.jsx)(_.m,{downloadButton:(0,o.jsx)(G,{handleDownload:a,isExporting:i,isProcessing:r,task:t}),preview:null,link:{href:"https://imageresizer.com/bulk-resize",title:"Bulk Image Resizer"},title:r||i?(0,o.jsx)("div",{className:"flex items-center justify-center flex-grow gap-2 mt-8 capitalize",children:(0,o.jsx)("div",{className:"text-3xl font-semibold text-center","data-testid":"download-page-title",children:(0,o.jsx)(c.vN,{keyName:"title-loading"})})}):(0,o.jsxs)("div",{className:"flex items-center justify-center flex-grow gap-2 mt-8 capitalize",children:[(0,o.jsx)(E.w,{}),(0,o.jsx)("div",{className:"text-3xl font-semibold text-center","data-testid":"download-page-title",children:(0,o.jsx)(c.vN,{keyName:"title"})})]}),subTitle:r||i?(0,o.jsx)("div",{className:"text-center text-[22px]","data-testid":"download-page-sub-title",children:(0,o.jsx)(c.vN,{keyName:"sub-title-loading"})}):(0,o.jsx)("div",{className:"text-center text-[22px]","data-testid":"download-page-sub-title",children:(0,o.jsx)(c.vN,{keyName:"sub-title"})}),pageUrl:"/bulk-resize/download/:taskId",urlSlugVariables:{taskId:(null===t||void 0===t?void 0:t.id)||""}})},B=a(87414),F=a(95155),R=a(51731),I=function(){return(0,o.jsx)(D,{})},Z=["bulk-resize-download","download"].concat((0,i.Z)(F.y)),U=!0,X=function(e){var r=e.task;return(0,o.jsx)(B.i,{files:Z,children:(0,o.jsx)(S.o,{task:r,children:(0,o.jsx)(R.m,{children:(0,o.jsx)(I,{})})})})}},11518:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bulk-resize/download/[export-task-id]",function(){return a(54377)}])},25934:function(e,r,a){"use strict";var i;a.d(r,{Z:function(){return u}});var t=new Uint8Array(16);function n(){if(!i&&!(i="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(t)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var d=function(e){return"string"===typeof e&&s.test(e)},o=[],l=0;l<256;++l)o.push((l+256).toString(16).substr(1));var c=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(o[e[r+0]]+o[e[r+1]]+o[e[r+2]]+o[e[r+3]]+"-"+o[e[r+4]]+o[e[r+5]]+"-"+o[e[r+6]]+o[e[r+7]]+"-"+o[e[r+8]]+o[e[r+9]]+"-"+o[e[r+10]]+o[e[r+11]]+o[e[r+12]]+o[e[r+13]]+o[e[r+14]]+o[e[r+15]]).toLowerCase();if(!d(a))throw TypeError("Stringified UUID is invalid");return a};var u=function(e,r,a){var i=(e=e||{}).random||(e.rng||n)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,r){a=a||0;for(var t=0;t<16;++t)r[a+t]=i[t];return r}return c(i)}}},function(e){e.O(0,[1664,7350,9367,1455,2967,1731,769,9386,9774,2888,179],(function(){return r=11518,e(e.s=r);var r}));var r=e.O();_N_E=r}]);
//# sourceMappingURL=[export-task-id]-ea233a37da552db4.js.map